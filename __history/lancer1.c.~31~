#include <stdio.h>
#include <stdlib.h>
#include "joueur.h"
#include "lancer1.h"
#include "lancer2.h"
#include "initialisejoueur.h"


void fonction1lancer(Joueur* pointeurtab_joueur)
{
	char touche;
	int touractuel=pointeurtab_joueur->tourcourant;   //on regarde à quel tour on se trouve pour savoir quelle case du tableau tab_score incrémenter
    int intervallelancer2;

	srand(time(NULL));                      //on génère un nombre aléatoire entre 0 et 10 pour simuler un lancer

	do
	{
		printf("Appuyez sur '*' pour lancer \n");
		touche = getch();

	}while(touche!='*');

	nbaleatoirelancer = rand()%10+0;


	if(nbaleatoirelancer<10 && touractuel!=9)   //lancer classique
	{
	   pointeurtab_joueur->tab_score[touractuel]=nbaleatoirelancer;
	   intervallelancer2=10-nbaleatoirelancer; //on calcule l'intervalle du second lancer
	   fonction2lancer(intervallelancer2,pointeurtab_joueur); //on lance une deuxieme fois

	}

	if(nbaleatoirelancer==10 && touractuel!=9) //strike
	{

	   pointeurtab_joueur->tab_score[touractuel]=10;   //le premier lancer vaut 10
	   pointeurtab_joueur->tab_score[touractuel+1]=-1; //le second -1 étant donné qu'il n'est pas joué
	   //pointeurtab_joueur->tourcourant=tourcourant++; //on passe au tour suivant

	}

	if(touractuel==9) //si on se trouve au dernier tour
	{
		if(nbaleatoirelancer<10)   //lancer classique
		{
			 pointeurtab_joueur->tab_score[touractuel]=nbaleatoirelancer;
			 intervallelancer2=10-nbaleatoirelancer; //on calcule l'intervalle du second lancer
			 fonction2lancer(intervallelancer2,pointeurtab_joueur); //on lance une deuxieme fois

		}

		if(nbaleatoirelancer==10) //strike
		{

			pointeurtab_joueur->tab_score[touractuel]=10;   //le premier lancer vaut 10
			pointeurtab_joueur->tab_score[touractuel+1]=-1; //le second -1 étant donné qu'il n'est pas joué
			//pointeurtab_joueur->tourcourant=tourcourant++; //on passe au tour suivant

		}


    }





}
