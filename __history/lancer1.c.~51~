#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include "joueur.h"
#include "lancer1.h"
#include "lancer2.h"
#include "initialisejoueur.h"


void lancer1(Joueur* pointeurtab_joueur)
{
	char touche=0;
    int nbaleatoirelancer;
	int touractuel=pointeurtab_joueur->tourcourant;   //on regarde à quel tour on se trouve pour savoir quelle case du tableau tab_score incrémenter
	int intervallelancer2;

						 //on génère un nombre aléatoire entre 0 et 10 pour simuler un lancer
	srand(time(NULL));

	while(touche!='*')
	{

		printf("Appuyez sur '*' pour lancer \n");
		fflush(stdin);
		scanf("%c",&touche);

	}

	nbaleatoirelancer = rand()%10+0;


	if(nbaleatoirelancer<10 && touractuel!=9)   //lancer classique
	{
	   pointeurtab_joueur->tab_score[touractuel]=nbaleatoirelancer;
	   intervallelancer2=10-nbaleatoirelancer; //on calcule l'intervalle du second lancer
	   lancer2(intervallelancer2,pointeurtab_joueur); //on lance une deuxieme fois

	}

	if(nbaleatoirelancer==10 && touractuel!=9) //strike
	{

	   pointeurtab_joueur->tab_score[touractuel]=10;   //le premier lancer vaut 10
	   pointeurtab_joueur->tab_score[touractuel+1]=-1; //le second -1 étant donné qu'il n'est pas joué
	   pointeurtab_joueur->tourcourant++; //on passe au tour suivant

	}

	if(touractuel==9) //si on se trouve au dernier tour
	{
		if(nbaleatoirelancer<10)   //lancer classique
		{
			 pointeurtab_joueur->tab_score[touractuel]=nbaleatoirelancer;
			 intervallelancer2=10-nbaleatoirelancer; //on calcule l'intervalle du second lancer
			 lancer2(intervallelancer2,pointeurtab_joueur); //on lance une deuxieme fois

		}

		if(nbaleatoirelancer==10) //strike
		{

			pointeurtab_joueur->tab_score[touractuel]=10;   //le premier lancer vaut 10
			pointeurtab_joueur->tab_score[touractuel+1]=-1; //le second -1 étant donné qu'il n'est pas joué
			lancer2(intervallelancer2,pointeurtab_joueur);  //le passage de 'intervallelancer2'' est inutile dans le cas du strike mais la définition de la fonction oblige à le mettre en paramètre

		}


    }





}
